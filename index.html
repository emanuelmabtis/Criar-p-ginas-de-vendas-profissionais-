import { useState } from "react";
import { Input } from "@/components/ui/input";
import { Button } from "@/components/ui/button";
import Image from "next/image";
import { ChevronsDown } from "lucide-react";
import { motion } from "framer-motion";

export default function TemplateBarbearia() {
  const [nomeLoja, setNomeLoja] = useState("Barbearia do João");
  const [servicos, setServicos] = useState("Corte - R$25\nBarba - R$15\nCombo - R$35");
  const [whatsapp, setWhatsapp] = useState("5599999999999");
  const [isValid, setIsValid] = useState(true); // Estado para controle de validação

  const validarFormulario = () => {
    if (!nomeLoja || !servicos || !whatsapp.match(/^\d{11}$/)) {
      setIsValid(false);
      return false;
    }
    setIsValid(true);
    return true;
  };

  const gerarLink = () => {
    if (validarFormulario()) {
      const texto = `*${nomeLoja}*\n\n${servicos.replaceAll("\n", "\n")}\n\nAgende pelo WhatsApp: https://wa.me/${whatsapp}`;
      navigator.clipboard.writeText(texto);
      alert("Texto copiado! Agora é só colar na sua bio ou divulgar.");
    } else {
      alert("Por favor, preencha todos os campos corretamente.");
    }
  };

  return (
    <div className="max-w-xl mx-auto p-4 sm:px-6 lg:px-8">
      <h1
        className="text-5xl font-extrabold text-center mb-4"
        style={{
          background: "linear-gradient(to bottom, #8B4513, #000000)",
          WebkitBackgroundClip: "text",
          WebkitTextFillColor: "transparent",
          textShadow: "2px 2px 0 #000, 4px 4px 0 #555",
        }}
      >
        Barbearia
      </h1>

      <p
        className="text-center text-3xl font-bold mb-4"
        style={{
          background: "linear-gradient(to bottom, #8B4513, #000000)",
          WebkitBackgroundClip: "text",
          WebkitTextFillColor: "transparent",
          textShadow: "2px 2px 0 #000, 4px 4px 0 #555",
        }}
      >
        Estilo, cuidado e atitude em cada corte. Agende já o seu horário!
      </p>

      <div className="flex justify-center mb-4">
        <Image
          src="/file-EGJ7sWQpcevza82Y1quznA"
          alt="Logo Barbearia"
          width={150}
          height={150}
          className="rounded-full border shadow-lg"
        />
      </div>

      <p className="text-center text-lg mb-2">
        Trabalhamos com dedicação e excelência para oferecer cortes modernos, atendimento de qualidade e um serviço de confiança que faz você voltar!
      </p>

      <p className="text-center text-xl font-semibold text-black border border-white p-2 rounded-md mb-4">
        Venha agendar o seu horário
      </p>

      <div className="flex flex-col items-center mb-6">
        <motion.div animate={{ y: [0, 10, 0] }} transition={{ repeat: Infinity, duration: 1.5 }}>
          <ChevronsDown size={36} className="text-black" />
        </motion.div>
        <Button
          className="mt-4 px-6 py-2 text-white font-bold rounded-full shadow-md"
          style={{ backgroundColor: "#a0522d" }}
        >
          Agendar o meu horário
        </Button>
      </div>

      <p className="text-center text-sm text-gray-600 mb-6">
        Barbearia localizada no centro de Salvador
      </p>

      <h2 className="text-2xl font-bold mb-4">Crie sua Página: Barbearia</h2>

      <Input
        placeholder="Nome da Barbearia"
        value={nomeLoja}
        onChange={(e) => setNomeLoja(e.target.value)}
        className="mb-4 w-full sm:w-3/4 lg:w-2/3"
      />

      <textarea
        placeholder="Serviços e preços"
        value={servicos}
        onChange={(e) => setServicos(e.target.value)}
        rows={5}
        className="w-full p-2 rounded border mb-4 sm:w-3/4 lg:w-2/3"
      />

      <Input
        placeholder="Número do WhatsApp (com DDD)"
        value={whatsapp}
        onChange={(e) => setWhatsapp(e.target.value)}
        className="mb-4 w-full sm:w-3/4 lg:w-2/3"
      />

      {!isValid && (
        <p className="text-red-500 text-center mb-4">
          Todos os campos são obrigatórios e o número de WhatsApp deve ter 11 dígitos.
        </p>
      )}

      <Button onClick={gerarLink} className="w-full sm:w-3/4 lg:w-2/3">
        Gerar Página de Venda
      </Button>
    </div>
  );
}
